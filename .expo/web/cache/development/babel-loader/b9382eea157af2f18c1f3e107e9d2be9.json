{"ast":null,"code":"import \"core-js/modules/es6.date.now\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.for-each\";\nimport { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\nimport debounce from 'debounce';\nimport findNodeHandle from '../../exports/findNodeHandle';\nvar emptyObject = {};\nvar registry = {};\nvar id = 1;\n\nvar guid = function guid() {\n  return \"r-\" + id++;\n};\n\nvar resizeObserver;\n\nif (canUseDOM) {\n  if (typeof window.ResizeObserver !== 'undefined') {\n    resizeObserver = new window.ResizeObserver(function (entries) {\n      entries.forEach(function (_ref) {\n        var target = _ref.target;\n        var instance = registry[target._layoutId];\n        instance && instance._handleLayout();\n      });\n    });\n  } else {\n    if (process.env.NODE_ENV !== 'production' && process.env.NODE_ENV !== 'test') {\n      console.warn('onLayout relies on ResizeObserver which is not supported by your browser. ' + 'Please include a polyfill, e.g., https://github.com/que-etc/resize-observer-polyfill. ' + 'Falling back to window.onresize.');\n    }\n\n    var triggerAll = function triggerAll() {\n      Object.keys(registry).forEach(function (key) {\n        var instance = registry[key];\n\n        instance._handleLayout();\n      });\n    };\n\n    window.addEventListener('resize', debounce(triggerAll, 16), false);\n  }\n}\n\nvar observe = function observe(instance) {\n  var id = guid();\n  registry[id] = instance;\n\n  if (resizeObserver) {\n    var node = findNodeHandle(instance);\n\n    if (node) {\n      node._layoutId = id;\n      resizeObserver.observe(node);\n    }\n  } else {\n    instance._layoutId = id;\n\n    instance._handleLayout();\n  }\n};\n\nvar unobserve = function unobserve(instance) {\n  if (resizeObserver) {\n    var node = findNodeHandle(instance);\n\n    if (node) {\n      delete registry[node._layoutId];\n      delete node._layoutId;\n      resizeObserver.unobserve(node);\n    }\n  } else {\n    delete registry[instance._layoutId];\n    delete instance._layoutId;\n  }\n};\n\nvar safeOverride = function safeOverride(original, next) {\n  if (original) {\n    return function prototypeOverride() {\n      original.call(this, arguments);\n      next.call(this, arguments);\n    };\n  }\n\n  return next;\n};\n\nvar applyLayout = function applyLayout(Component) {\n  var componentDidMount = Component.prototype.componentDidMount;\n  var componentDidUpdate = Component.prototype.componentDidUpdate;\n  var componentWillUnmount = Component.prototype.componentWillUnmount;\n  Component.prototype.componentDidMount = safeOverride(componentDidMount, function componentDidMount() {\n    this._layoutState = emptyObject;\n    this._isMounted = true;\n\n    if (this.props.onLayout) {\n      observe(this);\n    }\n  });\n  Component.prototype.componentDidUpdate = safeOverride(componentDidUpdate, function componentDidUpdate(prevProps) {\n    if (this.props.onLayout && !prevProps.onLayout) {\n      observe(this);\n    } else if (!this.props.onLayout && prevProps.onLayout) {\n      unobserve(this);\n    }\n  });\n  Component.prototype.componentWillUnmount = safeOverride(componentWillUnmount, function componentWillUnmount() {\n    this._isMounted = false;\n\n    if (this.props.onLayout) {\n      unobserve(this);\n    }\n  });\n\n  Component.prototype._handleLayout = function () {\n    var _this = this;\n\n    var layout = this._layoutState;\n    var onLayout = this.props.onLayout;\n\n    if (onLayout) {\n      this.measure(function (x, y, width, height) {\n        if (_this._isMounted) {\n          if (layout.x !== x || layout.y !== y || layout.width !== width || layout.height !== height) {\n            _this._layoutState = {\n              x: x,\n              y: y,\n              width: width,\n              height: height\n            };\n            var nativeEvent = {\n              layout: _this._layoutState\n            };\n            Object.defineProperty(nativeEvent, 'target', {\n              enumerable: true,\n              get: function get() {\n                return findNodeHandle(_this);\n              }\n            });\n            onLayout({\n              nativeEvent: nativeEvent,\n              timeStamp: Date.now()\n            });\n          }\n        }\n      });\n    }\n  };\n\n  return Component;\n};\n\nexport default applyLayout;","map":{"version":3,"sources":["/Users/calumharris/code/liana-moran/node_modules/react-native-web/dist/modules/applyLayout/index.js"],"names":["emptyObject","registry","id","guid","window","resizeObserver","entries","target","_ref","instance","process","console","triggerAll","Object","debounce","observe","node","findNodeHandle","unobserve","safeOverride","original","next","applyLayout","componentDidMount","Component","componentDidUpdate","componentWillUnmount","prevProps","_this","layout","onLayout","x","y","width","height","nativeEvent","_layoutState","enumerable","get","timeStamp","Date"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Nicolas Gallagher.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\nimport { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\nimport debounce from 'debounce';\nimport findNodeHandle from '../../exports/findNodeHandle';\nvar emptyObject = {};\nvar registry = {};\nvar id = 1;\n\nvar guid = function guid() {\n  return \"r-\" + id++;\n};\n\nvar resizeObserver;\n\nif (canUseDOM) {\n  if (typeof window.ResizeObserver !== 'undefined') {\n    resizeObserver = new window.ResizeObserver(function (entries) {\n      entries.forEach(function (_ref) {\n        var target = _ref.target;\n        var instance = registry[target._layoutId];\n        instance && instance._handleLayout();\n      });\n    });\n  } else {\n    if (process.env.NODE_ENV !== 'production' && process.env.NODE_ENV !== 'test') {\n      console.warn('onLayout relies on ResizeObserver which is not supported by your browser. ' + 'Please include a polyfill, e.g., https://github.com/que-etc/resize-observer-polyfill. ' + 'Falling back to window.onresize.');\n    }\n\n    var triggerAll = function triggerAll() {\n      Object.keys(registry).forEach(function (key) {\n        var instance = registry[key];\n\n        instance._handleLayout();\n      });\n    };\n\n    window.addEventListener('resize', debounce(triggerAll, 16), false);\n  }\n}\n\nvar observe = function observe(instance) {\n  var id = guid();\n  registry[id] = instance;\n\n  if (resizeObserver) {\n    var node = findNodeHandle(instance);\n\n    if (node) {\n      node._layoutId = id;\n      resizeObserver.observe(node);\n    }\n  } else {\n    instance._layoutId = id;\n\n    instance._handleLayout();\n  }\n};\n\nvar unobserve = function unobserve(instance) {\n  if (resizeObserver) {\n    var node = findNodeHandle(instance);\n\n    if (node) {\n      delete registry[node._layoutId];\n      delete node._layoutId;\n      resizeObserver.unobserve(node);\n    }\n  } else {\n    delete registry[instance._layoutId];\n    delete instance._layoutId;\n  }\n};\n\nvar safeOverride = function safeOverride(original, next) {\n  if (original) {\n    return function prototypeOverride() {\n      /* eslint-disable prefer-rest-params */\n      original.call(this, arguments);\n      next.call(this, arguments);\n      /* eslint-enable prefer-rest-params */\n    };\n  }\n\n  return next;\n};\n\nvar applyLayout = function applyLayout(Component) {\n  var componentDidMount = Component.prototype.componentDidMount;\n  var componentDidUpdate = Component.prototype.componentDidUpdate;\n  var componentWillUnmount = Component.prototype.componentWillUnmount;\n  Component.prototype.componentDidMount = safeOverride(componentDidMount, function componentDidMount() {\n    this._layoutState = emptyObject;\n    this._isMounted = true;\n\n    if (this.props.onLayout) {\n      observe(this);\n    }\n  });\n  Component.prototype.componentDidUpdate = safeOverride(componentDidUpdate, function componentDidUpdate(prevProps) {\n    if (this.props.onLayout && !prevProps.onLayout) {\n      observe(this);\n    } else if (!this.props.onLayout && prevProps.onLayout) {\n      unobserve(this);\n    }\n  });\n  Component.prototype.componentWillUnmount = safeOverride(componentWillUnmount, function componentWillUnmount() {\n    this._isMounted = false;\n\n    if (this.props.onLayout) {\n      unobserve(this);\n    }\n  });\n\n  Component.prototype._handleLayout = function () {\n    var _this = this;\n\n    var layout = this._layoutState;\n    var onLayout = this.props.onLayout;\n\n    if (onLayout) {\n      this.measure(function (x, y, width, height) {\n        if (_this._isMounted) {\n          if (layout.x !== x || layout.y !== y || layout.width !== width || layout.height !== height) {\n            _this._layoutState = {\n              x: x,\n              y: y,\n              width: width,\n              height: height\n            };\n            var nativeEvent = {\n              layout: _this._layoutState\n            };\n            Object.defineProperty(nativeEvent, 'target', {\n              enumerable: true,\n              get: function get() {\n                return findNodeHandle(_this);\n              }\n            });\n            onLayout({\n              nativeEvent: nativeEvent,\n              timeStamp: Date.now()\n            });\n          }\n        }\n      });\n    }\n  };\n\n  return Component;\n};\n\nexport default applyLayout;"]},"metadata":{},"sourceType":"module"}